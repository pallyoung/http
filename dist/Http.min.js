!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.http=e()}(this,function(){"use strict";function t(){}function e(t,e){t.isCompleted||(t.isCompleted=!0,t.onerror({}))}function n(t,e){if(!t.isCompleted){t.isCompleted=!0;var n=null;try{n=JSON.parse(e.responseText)}catch(t){n=e.responseText}t.onsuccess(n)}}function o(t,e){t.isCompleted||(t.isCompleted=!0,t.onerror({}))}function r(t){return null===t}function i(t){return void 0===t}function s(t){return"string"==typeof t}function u(t){return v.test(t)}function c(t){return j(t)&&t.length<=0}function a(t){try{return"{}"===JSON.stringify(t)}catch(t){return!1}}function d(t){return u(t)||r(t)||i(t)||c(t)||a(t)}function h(t){try{return C&&t.constructor===FormData}catch(t){return!1}}function f(t){return"[object Function]"===Object.prototype.toString.call(t)}function p(t){this.data=[]}function l(e,n){n=n||{},this.url=e,this.method=n.method?n.method.toLowerCase():"get",this.headers=n.headers||{},this.referrer=n.referrer||"",this.body=n.body,this.isCompleted=!1,this.onsuccess=n.onsuccess||t,this.onerror=n.onerror||t,this.async=n.async||!0,this.timeout=n.timeout||w,this.timeoutHandler=null,h(this.body)?this.method="post":this.body=m(this.body),"get"!==this.method||d(this.body)||(this.url+="?"+this.body),h(this.body)||(this.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),this.dataType=n.dataType||"*"}function y(t,e){for(var n in t)e.setRequestHeader(n,t[n])}function m(t){if(d(t))return null;if(s(t)||h(t))return t;var e=new p;for(var n in t)t.hasOwnProperty(n)&&e.append(n,t[n]);return e.stringify()}function b(t){if(d(t))return null;var r=new l(t.url,t),i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(clearTimeout(t.ontimeout),i.onreadystatechange=null,i.status>=200&&i.status<300||304==i.status?n(r,i):e(r,i))},i.open(r.method,r.url,r.async),y(r.headers,i),r.dataType&&i.overrideMimeType&&i.overrideMimeType(r.dataType),i.send(r.body),r.timeoutHandler=setTimeout(function(){o(r,i)},r.timeout)}function g(t,e,n,o){f(e)&&(n=e,o=n,e=null),b({method:"post",body:e,url:t,onsuccess:n,onerror:o})}function T(t,e,n,o){f(e)&&(n=e,o=n,e=null),b({method:"get",body:e,url:t,onsuccess:n,onerror:o})}var w=6e4,v=/^[\s]*$/,C=!!window.FormData,j=Array.isArray||function(t){Object.proptotype.toString.call(t)};return p.prototype={constructor:p,append:function(t,e){this.data.push(encodeURI(t)+"="+encodeURI(e))},stringify:function(){return this.data.join("&")}},{http:b,post:g,get:T,timeout:w}});